<!DOCTYPE html>
<html>

<head>
    <title>Organizador de Horarios y Editor de Asignaturas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <h1>Organizador de Horarios</h1>

    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col" data-dia="lunes">Lunes</th>
                <th scope="col" data-dia="martes">Martes</th>
                <th scope="col" data-dia="miercoles">Miércoles</th>
                <th scope="col" data-dia="jueves">Jueves</th>
                <th scope="col" data-dia="viernes">Viernes</th>
            </tr>
        </thead>

        <tbody>
            <tr>
                <th scope="row">8:31-9:10</th>
                <td id="lunes"></td>
                <td id="martes"></td>
                <td id="miercoles"></td>
                <td id="jueves"></td>
                <td id="viernes"></td>
            </tr>
            <tr>
                <th scope="row">9:11-9:50</th>
                <td id="lunes2"></td>
                <td id="martes2"></td>
                <td id="miercoles2"></td>
                <td id="jueves2"></td>
                <td id="viernes2"></td>
            </tr>
            <tr>
                <th scope="row">10:00-10:40</th>
                <td id="lunes3"></td>
                <td id="martes3"></td>
                <td id="miercoles3"></td>
                <td id="jueves3"></td>
                <td id="viernes3"></td>
            </tr>
            <tr>
                <th scope="row">10:41-11:20</th>
                <td id="lunes4"></td>
                <td id="martes4"></td>
                <td id="miercoles4"></td>
                <td id="jueves4"></td>
                <td id="viernes4"></td>
            </tr>
            <tr>
                <th scope="row">11:31-12:10</th>
                <td id="lunes5"></td>
                <td id="martes5"></td>
                <td id="miercoles5"></td>
                <td id="jueves5"></td>
                <td id="viernes5"></td>
            </tr>
            <tr>
                <th scope="row">12:11-12:50</th>
                <td id="lunes6"></td>
                <td id="martes6"></td>
                <td id="miercoles6"></td>
                <td id="jueves6"></td>
                <td id="viernes6"></td>
            </tr>
            <tr>
                <th scope="row">13:01-13:40</th>
                <td id="lunes7"></td>
                <td id="martes7"></td>
                <td id="miercoles7"></td>
                <td id="jueves7"></td>
                <td id="viernes7"></td>
            </tr>
            <tr>
                <th scope="row">13:41-14:20</th>
                <td id="lunes8"></td>
                <td id="martes8"></td>
                <td id="miercoles8"></td>
                <td id="jueves8"></td>
                <td id="viernes8"></td>
            </tr>
            <tr>
                <th scope="row">14:31-15:10</th>
                <td id="lunes9"></td>
                <td id="martes9"></td>
                <td id="miercoles9"></td>
                <td id="jueves9"></td>
                <td id="viernes9"></td>
            </tr>
            <tr>
                <th scope="row">15:11-15:50</th>
                <td id="lunes10"></td>
                <td id="martes10"></td>
                <td id="miercoles10"></td>
                <td id="jueves10"></td>
                <td id="viernes10"></td>
            </tr>
            <tr>
                <th scope="row">16:01-16:40</th>
                <td id="lunes11"></td>
                <td id="martes11"></td>
                <td id="miercoles11"></td>
                <td id="jueves11"></td>
                <td id="viernes11"></td>
            </tr>
            <tr>
                <th scope="row">16:41-17:20</th>
                <td id="lunes12"></td>
                <td id="martes12"></td>
                <td id="miercoles12"></td>
                <td id="jueves12"></td>
                <td id="viernes12"></td>
            </tr>
        </tbody>
    </table>





    <h1>Editor de Asignaturas</h1>
    <!-- formulario de asignaturas -->


    <form onsubmit="agregarAsignatura(event)">

        <div class="mb-3">
            <label for="seccion">Sección:</label>
            <input type="text" id="seccion" required>
        </div>
        <div class="mb-3">
            <label for="nombre">Nombre Asignatura:</label>
            <input type="text" id="nombre" required>
        </div>
        <div class="mb-3">
            <label for="horario">Horario:</label>
            <select id="horario" required>
                <option value="" disabled selected>Seleccione</option>
                <!-- Agregar opciones con id numérico incremental -->
                <option value="8:31-9:10">8:31-9:10</option>
                <option value="9:11-9:50">9:11-9:50</option>
                <option value="10:00-10:40">10:00-10:40</option>
                <option value="10:41-11:20">10:41-11:20</option>
                <option value="11:31-12:10">11:31-12:10</option>
                <option value="12:11-12:50">12:11-12:50</option>
                <option value="13:01-13:40">13:01-13:40</option>
                <option value="13:41-14:20">13:41-14:20</option>
                <option value="14:31-15:10">14:31-15:10</option>
                <option value="15:11-15:50">15:11-15:50</option>
                <option value="16:01-16:40">16:01-16:40</option>
                <option value="16:41-17:20">16:41-17:20</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="sala">Sala:</label>
            <input type="text" id="sala" required>
        </div>
        <div class="mb-3">
            <label for="profesor">Profesor:</label>
            <input type="text" id="profesor" required>
        </div>












        <button type="submit">Agregar Asignatura</button>

    </form>







    <div class="container">
        <h1>Asignaturas Guardadas</h1>
        <div class="cards-container" id="asignaturasGuardadas">
            <!-- Aquí se mostrarán las asignaturas guardadas -->
        </div>
    </div>
    








    <script>
        

        // Definir la lista de días fuera de la función crearCardAsignatura
        const diasSemana = ['l', 'm', 'mi', 'j', 'v'];

        function crearCardAsignatura(id, seccion, nombre, horario, sala, profesor) {
            const card = document.createElement('div');
            card.classList.add('card');
            card.setAttribute('data-id', id); // Agregar el id como atributo personalizado
            card.innerHTML = `
                <div class="card-body">
                    <h5 class="card-title">${nombre}aaa</h5>
                    <p class="card-text">
                        Sección: ${seccion}<br>
                        Horario: ${horario}<br>
                        Sala: ${sala}<br>
                        Profesor: ${profesor}
                    </p>
                </div>            
                <div class="buttons-container">
                <!-- Botones de los días -->
                    ${diasSemana.map(dia => `<button class="btn btn-primary" data-dia="${dia}" onclick="asignarDia(event, '${dia}')">${dia.charAt(0).toUpperCase() + dia.slice(1)}</button>`).join('')}
                    <button type="button" class="btn btn-danger" onclick="eliminarAsignatura(${id})">Eliminar</button>
                </div>
                `;
            return card;
        }


        let asignaturaActual = null;
        

        function agregarAsignatura(event) {
            event.preventDefault();

            const seccion = document.getElementById("seccion").value;
            const nombre = document.getElementById("nombre").value;
            const horario = document.getElementById("horario").value;
            const sala = document.getElementById("sala").value;
            const profesor = document.getElementById("profesor").value;

            // Crear la asignatura
            const asignatura = {
                id: Date.now(),
                seccion: seccion,
                nombre: nombre,
                horario: horario,
                sala: sala,
                profesor: profesor
            };

            // Almacenar la asignatura en la variable global
            asignaturaActual = asignatura;

            // Limpiar los campos del formulario
            document.getElementById("seccion").value = "";
            document.getElementById("nombre").value = "";
            document.getElementById("horario").value = "";
            document.getElementById("sala").value = "";
            document.getElementById("profesor").value = "";

            const card = crearCardAsignatura(asignatura.id, seccion, nombre, horario, sala, profesor);

            // Agregar la card al contenedor de asignaturas guardadas
            const asignaturasGuardadasDiv = document.getElementById('asignaturasGuardadas');
            asignaturasGuardadasDiv.appendChild(card);

            // Guardar la asignatura en el LocalStorage
            guardarAsignatura(asignatura); // Pasamos el objeto 'asignatura' en lugar de los valores individuales
        }


        function guardarAsignatura(asignatura) {
            let asignaturasGuardadas = JSON.parse(localStorage.getItem('asignaturas')) || [];
            asignaturasGuardadas.push(asignatura);
            localStorage.setItem('asignaturas', JSON.stringify(asignaturasGuardadas));

            // Cargar las asignaturas guardadas nuevamente
            cargarAsignaturasGuardadas();
        }

        function cargarAsignaturasGuardadas() {
            const asignaturasGuardadas = JSON.parse(localStorage.getItem('asignaturas')) || [];

            const asignaturasGuardadasDiv = document.getElementById('asignaturasGuardadas');
            asignaturasGuardadasDiv.innerHTML = '';

            for (const asignatura of asignaturasGuardadas) {
                const card = crearCardAsignatura(asignatura.id, asignatura.seccion, asignatura.nombre, asignatura.horario, asignatura.sala, asignatura.profesor);
                asignaturasGuardadasDiv.appendChild(card);
            }
            // Agregar atributo data-dia a los botones de cada card
            const buttonsContainers = asignaturasGuardadasDiv.querySelectorAll('.buttons-container');
            for (const buttonsContainer of buttonsContainers) {
                for (let i = 0; i < buttonsContainer.children.length; i++) {
                    const button = buttonsContainer.children[i];
                    const dia = diasSemana[i];
                    button.setAttribute('data-dia', dia);
                }
            }
        }

        function eliminarAsignatura(id) {
            // Eliminar la card del DOM
            const asignaturasGuardadasDiv = document.getElementById('asignaturasGuardadas');
            const cardToRemove = asignaturasGuardadasDiv.querySelector(`[data-id="${id}"]`);
            if (cardToRemove) {
                cardToRemove.remove();

                // Eliminar la asignatura del LocalStorage
                let asignaturasGuardadas = JSON.parse(localStorage.getItem('asignaturas')) || [];
                asignaturasGuardadas = asignaturasGuardadas.filter(asignatura => asignatura.id !== id);
                localStorage.setItem('asignaturas', JSON.stringify(asignaturasGuardadas));
            }
        }

        function asignarDia(event, dia) {
            if (!dia) {
                console.error('El botón no tiene atributo data-dia.');
                return;
            }
            const diaSeleccionado = dia.charAt(0).toUpperCase() + dia.slice(1);

            const cell = event.target.closest('td'); // Obtener la celda más cercana al botón
            const row = cell.parentElement; // Obtener la fila (tr) que contiene la celda

            // Obtener el índice de la columna según el día seleccionado
            const columnIndex = diasSemana.indexOf(dia);

            // Verificar si el nombre de la columna coincide con el día seleccionado
            if (row.cells[columnIndex + 1].getAttribute('data-dia') === diaSeleccionado) {
                // Si coincide, guardar el nombre de la asignatura en la celda
                row.cells[columnIndex + 1].textContent = asignaturaActual.nombre;
            } else {
                // Si no coincide, mostrar un mensaje o realizar alguna acción
                console.log('El día seleccionado no coincide con la columna de la tabla.');
            }
        }



        // Cargar las asignaturas del LocalStorage al cargar la página
        document.addEventListener('DOMContentLoaded', cargarAsignaturasGuardadas);
    </script>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>


</body>

</html>